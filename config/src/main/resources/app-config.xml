<?xml version="1.0" encoding="UTF-8"?>
<application xmlns="http://appconfig.aura.nav.no" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://appconfig.aura.nav.no http://maven.adeo.no/xsd/appconfig.xsd">

    <name>VeilArbPortefolje</name>

    <selftest>
        <path>veilarbportefolje/internal/selftest.json</path>
        <humanReadablePath>veilarbportefolje/internal/selftest</humanReadablePath>
    </selftest>

    <artifacts>
        <ear groupId="no.nav.fo" artifactId="veilarbportefolje-jee"/>
    </artifacts>

    <abacSecurity serviceUserResourceAlias="srvveilarbportefolje"/>

    <resources>
        <rest alias="abac.pdp.endpoint" mapToProperty="abac.endpoint" />
        <rest alias="veilarbportefolje.solr.brukercore" mapToProperty="veilarbportefolje.solr.brukercore" />
        <ldap alias="ldap" mapToProperty="ldap"/>

        <webservice mapToProperty="norg.virksomhet_enhet" alias="virksomhet:Enhet_v1"/>
        <webservice alias="Aktoer_v2" mapToProperty="aktoer.endpoint"/>
        <directory name="loependeytelserremount" mapToProperty="loependeytelser.path" temporary="false">
            <mountOnNfs customNFSResourceAlias="filmottak.loependeYtelser.nfs" />
        </directory>

        <applicationCertificate alias="srvveilarbportefolje"/>
        <datasource alias="veilarbportefoljeDB" jndi="java:/jboss/datasources/veilarbportefoljeDB">
            <pool maxPoolSize="300" minPoolSize="1"/>
        </datasource>
        <applicationProperties alias="veilarbportefolje.properties"/>
        <applicationProperties alias="portefolje.pilot.properties"/>

        <queueManager xaEnabled="true" alias="mqGateway02" jndi="java:/jboss/mqConnectionFactory">
            <queue alias="veilarbsituasjon_TILORDNEVEILEDER" jndi="java:jboss/jms/endreVeilederKo" />
        </queueManager>

        <baseUrl alias="isso-host"/>
        <baseUrl alias="isso-jwks"/>
        <baseUrl alias="isso-issuer"/>
        <baseUrl alias="isso.isalive"/>
        <credential alias="isso-rp-user"/>
    </resources>

    <exposed-services>
        <exposedRest name="no.nav.fo.solrindeks.hovedindeksering" path="/veilarbportefolje/tjenester/solr/hovedindeksering"/>
        <exposedRest name="no.nav.fo.solrindeks.deltaindeksering" path="/veilarbportefolje/tjenester/solr/deltaindeksering"/>
    </exposed-services>
  
    <serverOptions>
        <memoryParameters resourceAlias="veilarb-memparams"/>
    </serverOptions>

    <loadBalancer isAlive="/veilarbportefolje/internal/isAlive" />
    <security serviceUserResourceAlias="srvveilarbportefolje">
        <logins/>
    </security>
</application>
